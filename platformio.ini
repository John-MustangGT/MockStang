[env:esp01_1m]
platform = espressif8266
board = esp01_1m
framework = arduino

; ESP-01S has 1MB flash
board_build.flash_mode = dout
board_build.ldscript = eagle.flash.1m256.ld

; Optimize for size
build_flags =
    -Os
    -DVTABLES_IN_FLASH
    -ffunction-sections
    -fdata-sections
    -Wl,--gc-sections
    -DPIO_FRAMEWORK_ARDUINO_LWIP2_LOW_MEMORY

; Upload settings for ESP-01S
upload_speed = 57600
upload_resetmethod = nodemcu
monitor_speed = 115200

; Upload flags for ESP-01 compatibility
upload_flags =
    --before=default_reset
    --after=hard_reset

; Dependencies
lib_deps =
    https://github.com/me-no-dev/ESPAsyncTCP.git
    https://github.com/me-no-dev/ESPAsyncWebServer.git
